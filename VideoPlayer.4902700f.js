import{bF as $,d as B,be as I,b as a,T as P,W as T,U as R,k as V,Z as U,$ as z,a0 as M,a1 as O,m as S,i as _,o as p,c as v,a as d,h as j,f as s,a2 as r,ar as E,as as H,a3 as f,at as A,a6 as b,t as D,au as w,aJ as x,a7 as L,a4 as W,a9 as Y,aa as q,ab as J}from"./index.569c17c0.js";const K=$("v-banner-text"),y=u=>(Y("data-v-23e7e49d"),u=u(),q(),u),Z={ref:"videoWidget",class:"video-widget"},G={key:0,class:"no-video-alert"},Q=y(()=>d("span",null,"No video stream selected.",-1)),X=[Q],ee={key:1,class:"no-video-alert"},te=y(()=>d("p",null,"The selected stream is not available.",-1)),ae=y(()=>d("p",null,"Please check its source or select another stream.",-1)),oe=[te,ae],le={key:2,class:"no-video-alert"},se=y(()=>d("span",null,"Loading stream...",-1)),ie=[se],ne={class:"flex-wrap justify-center d-flex ga-5"},re=B({__name:"VideoPlayer",props:{widget:{}},setup(u){I(o=>({"483a4ab8":a(e).options.videoFitStyle,"4ef0bb48":C.value}));const g=P(),{namesAvailableStreams:c}=T(g),e=R(u).widget,i=V(),m=V(),n=V();U(()=>{const o={videoFitStyle:"cover",flipHorizontally:!1,flipVertically:!1,rotationAngle:0,streamName:void 0};e.value.options=Object.assign({},o,e.value.options),i.value=e.value.options.streamName});const N=setInterval(()=>{if(e.value.options.streamName===void 0&&!c.value.isEmpty()&&(e.value.options.streamName=c.value[0],i.value=e.value.options.streamName,c.value.length>1)){const t=`You have multiple streams available, so we chose one randomly to start with.
        If you want to change it, please open the widget configuration on the edit-menu.`;z.fire({title:"Multiple streams detected",text:t,icon:"info",confirmButtonText:"OK"})}const o=g.getMediaStream(e.value.options.streamName);M(o,n.value)||(n.value=o)},1e3);O(()=>clearInterval(N)),S(i,()=>{e.value.options.streamName=i.value,n.value=void 0}),S(n,()=>{!m.value||!n.value||(m.value.srcObject=n.value,m.value.play().then(()=>console.log("[VideoPlayer] Stream is playing")).catch(o=>{const t=`Failed to play stream. Reason: ${o}`;console.error(`[VideoPlayer] ${t}`)}))});const h=o=>{e.value.options.rotationAngle+=o},F=_(()=>`scale(${e.value.options.flipHorizontally?-1:1}, ${e.value.options.flipVertically?-1:1})`),k=_(()=>{var o;return`rotate(${(o=e.value.options.rotationAngle)!=null?o:0}deg)`}),C=_(()=>`${F.value} ${k.value}`);return(o,t)=>(p(),v(W,null,[d("div",Z,[i.value===void 0?(p(),v("div",G,X)):a(c).includes(i.value)?n.value===void 0?(p(),v("div",le,ie)):j("",!0):(p(),v("div",ee,oe)),d("video",{ref_key:"videoElement",ref:m,muted:"",autoplay:"",playsinline:"",disablePictureInPicture:""}," Your browser does not support the video tag. ",512)],512),s(L,{modelValue:a(e).managerVars.configMenuOpen,"onUpdate:modelValue":t[6]||(t[6]=l=>a(e).managerVars.configMenuOpen=l),width:"auto"},{default:r(()=>[s(E,{class:"pa-2"},{default:r(()=>[s(H,null,{default:r(()=>[f("Video widget config")]),_:1}),s(A,null,{default:r(()=>[s(b,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),label:"Stream name",class:"my-3",items:a(c),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":""},null,8,["modelValue","items"]),s(b,{modelValue:a(e).options.videoFitStyle,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).options.videoFitStyle=l),label:"Fit style",class:"my-3",items:["cover","fill","contain"],"item-title":"style",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":""},null,8,["modelValue"]),s(K,null,{default:r(()=>[f('Saved stream name: "'+D(a(e).options.streamName)+'"',1)]),_:1}),s(w,{modelValue:a(e).options.flipHorizontally,"onUpdate:modelValue":t[2]||(t[2]=l=>a(e).options.flipHorizontally=l),class:"my-1",label:"Flip horizontally",color:a(e).options.flipHorizontally?"rgb(0, 20, 80)":void 0,"hide-details":""},null,8,["modelValue","color"]),s(w,{modelValue:a(e).options.flipVertically,"onUpdate:modelValue":t[3]||(t[3]=l=>a(e).options.flipVertically=l),class:"my-1",label:"Flip vertically",color:a(e).options.flipVertically?"rgb(0, 20, 80)":void 0,"hide-details":""},null,8,["modelValue","color"]),d("div",ne,[s(x,{"prepend-icon":"mdi-file-rotate-left",variant:"outlined",onClick:t[4]||(t[4]=l=>h(-90))},{default:r(()=>[f(" Rotate Left")]),_:1}),s(x,{"prepend-icon":"mdi-file-rotate-right",variant:"outlined",onClick:t[5]||(t[5]=l=>h(90))},{default:r(()=>[f(" Rotate Right")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const ce=J(re,[["__scopeId","data-v-23e7e49d"]]);export{ce as default};
